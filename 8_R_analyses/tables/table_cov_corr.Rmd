---
output:
  officedown::rdocx_document:
    toc: no
---

```{r,echo=F,warning=F,message=F}

#Load libraries
require(flextable)
require(officer)
setwd('..')
source('clean_data.R')
```

**Table X.** Pairwise Pearson's correlation coefficient (*r*) between candidate covariates. Significant correlations (P<0.05) are indicated with an asterisk.

```{r,echo=F,message=F,warning=F}
pr_data <- all_data %>%
  select(carnivore,mass,gentime,migrates,flying,repro) %>%
  mutate(mass=log(mass), repro=log(repro)) %>%
  drop_na()

cr <- psych::corr.test(pr_data, adjust='none')


vals_raw <- round(cr$r, 3)
vals <- matrix(NA,nrow=nrow(cr$p),ncol=ncol(cr$p))
for (i in 1:nrow(vals_raw)){
  for (j in 1:ncol(vals_raw)){
    if(cr$p[i,j]==0){
      vals[i,j] <- '<0.001*'
    } else if(cr$p[i,j] < 0.05){
      vals[i,j] <- paste0(vals_raw[i,j],'*')
    } else { 
      vals[i,j] <- as.character(vals_raw[i,j])
    }
    if(j>=i){
      vals[i,j] <- NA
    }
  }
}


nms <- c('Diet','Mass','Gen time','Migration','Flying','Repro')

colnames(vals) <- rownames(vals) <- nms

vals <- cbind(Parameter=nms, vals)

out <- as.data.frame(vals[-1,-7],check.names=F)

f <- flextable(out)
f <- theme_vanilla(f)
f <- autofit(f)
#  f <- align(f, j = c(4,7), align = "right", part = "all")
#  f <- align(f, i = 1, align = 'center', part = "header")

f
```
